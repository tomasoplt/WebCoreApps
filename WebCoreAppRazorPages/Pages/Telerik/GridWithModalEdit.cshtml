@page
@model WebCoreAppRazorPages.GridWithModalEdit
@using Kendo.Mvc.UI

@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Xsrf
@Html.AntiForgeryToken()

<div class="row">
    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
        <h1 class="page-title txt-color-blueDark">
            <i class="fa fa-table fa-fw "></i>
            Telerik
            <span>
                >
                Basic Grid Example
            </span>
        </h1>
    </div>
    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-8">
        <ul id="sparks" class="">
            <li class="sparks-info">
                <h5> My Income <span class="txt-color-blue">$47,171</span></h5>
                <div class="sparkline txt-color-blue hidden-mobile hidden-md hidden-sm">
                    1300, 1877, 2500, 2577, 2000, 2100, 3000, 2700, 3631, 2471, 2700, 3631, 2471
                </div>
            </li>
            <li class="sparks-info">
                <h5> Site Traffic <span class="txt-color-purple"><i class="fa fa-arrow-circle-up" data-rel="bootstrap-tooltip" title="Increased"></i>&nbsp;45%</span></h5>
                <div class="sparkline txt-color-purple hidden-mobile hidden-md hidden-sm">
                    110,150,300,130,400,240,220,310,220,300, 270, 210
                </div>
            </li>
            <li class="sparks-info">
                <h5> Site Orders <span class="txt-color-greenDark"><i class="fa fa-shopping-cart"></i>&nbsp;2447</span></h5>
                <div class="sparkline txt-color-greenDark hidden-mobile hidden-md hidden-sm">
                    110,150,300,130,400,240,220,310,220,300, 270, 210
                </div>
            </li>
        </ul>
    </div>
</div>


<!-- row -->
<div class="row">

    <!-- NEW WIDGET START -->
    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

        <!-- Widget ID (each widget will need unique ID)-->
        <div class="jarviswidget jarviswidget-color-blueDark" id="wid-id-0" data-widget-editbutton="false">
            <header>
                <span class="widget-icon">
                    <i class="fa fa-table"></i>
                </span>
                <h2>Normal Table</h2>
            </header>

            <!-- widget div-->
            <div>
                <!-- widget edit box -->
                <div class="jarviswidget-editbox">
                    <!-- This area used as dropdown edit box -->
                </div>
                <!-- end widget edit box -->
                <!-- widget content -->
                <div class="widget-body">
                    @(Html.Kendo().Grid<WebCoreApp.Services.Dto.DepartmentDto>()
                        .Name("Grid")
                        .Columns(columns =>
                        {
                            columns.Bound(p => p.DepartmentID).Title("Department ID");
                            columns.Bound(p => p.Name).Title("Department Name");
                            columns.Bound(p => p.Budget).Title("Budget").Width(130);
                            columns.Bound(p => p.StartDate).Title("Start Date").Width(130);
                            columns.Command(command => command.Custom("Edit").Click("editRecord"));
                        })
                        .Pageable()
                        .Sortable()
                        .Scrollable(scr => scr.Height(430))
                        .Filterable()
                        .DataSource(ds => ds.Ajax()
                            .Read(r => r.Url("/Telerik/GridWithModalEdit?handler=Read").Data("forgeryToken"))
                            .Model(m => m.Id(id => id.DepartmentID))
                            .PageSize(10)
                         )
                    )

                    @(Html.Kendo().Window().Name("DepartmentDetails")
                        .Title("Department details")
                        .Visible(false)
                        .Events(events => events.Activate("onActivate"))
                        .Modal(true)
                        .Draggable(true)
                        .Width(800)
                        .Height(600)
                    )

                </div>
                <!-- end widget content -->
            </div>
            <!-- end widget div -->
        </div>
    </article>
</div>

<script src="~/js/views/Telerik/GridWithModalEdit.js" crossorigin="anonymous"></script>

<!-- end widget grid -->
@section Scripts {
    <script type="text/javascript">

        function forgeryToken() {
            return kendo.antiForgeryTokens();
        }

        /* DO NOT REMOVE : GLOBAL FUNCTIONS!
         *
         * pageSetUp(); WILL CALL THE FOLLOWING FUNCTIONS
         *
         * // activate tooltips
         * $("[rel=tooltip]").tooltip();
         *
         * // activate popovers
         * $("[rel=popover]").popover();
         *
         * // activate popovers with hover states
         * $("[rel=popover-hover]").popover({ trigger: "hover" });
         *
         * // activate inline charts
         * runAllCharts();
         *
         * // setup widgets
         * setup_widgets_desktop();
         *
         * // run form elements
         * runAllForms();
         *
         ********************************
         *
         * pageSetUp() is needed whenever you load a page.
         * It initializes and checks for all basic elements of the page
         * and makes rendering easier.
         *
         */

        pageSetUp();

        /*
         * ALL PAGE RELATED SCRIPTS CAN GO BELOW HERE
         * eg alert("my home function");
         *
         * var pagefunction = function() {
         *   ...
         * }
         * loadScript("/js/plugin/_PLUGIN_NAME_.js", pagefunction);
         *
         * TO LOAD A SCRIPT:
         * var pagefunction = function (){
         *  loadScript(".../plugin.js", run_after_loaded);
         * }
         *
         * OR
         *
         * loadScript(".../plugin.js", run_after_loaded);
         */

        // PAGE RELATED SCRIPTS

        // pagefunction

        var pagefunction = function () {

        };

        // end pagefunction

        // run pagefunction on load

        pagefunction();

    </script>
}
